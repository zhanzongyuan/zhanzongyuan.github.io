{"summary":"<h2 id=\"一、VPS\"><a href=\"#一、VPS\" class=\"headerlink\" title=\"一、VPS\"></a>一、VPS</h2><blockquote>\n<p> 供应商：<a href=\"https://www.vultr.com\" target=\"_blank\" rel=\"noopener\">Vultr</a>、<a href=\"https://www.digitalocean.com\" target=\"_blank\" rel=\"noopener\">DigitalOcean</a></p>\n</blockquote>\n<ol>\n<li><a href=\"https://www.vultr.com\" target=\"_blank\" rel=\"noopener\">Vultr</a></li>\n</ol>\n<p>优点：</p>\n<ul>\n<li>节点位置多</li>\n<li>提供节点<a href=\"https://www.vultr.com/faq/#downloadspeedtests\" target=\"_blank\" rel=\"noopener\">测速</a></li>\n<li>邀请码优惠：老推新，新人享10刀</li>\n<li>最低消费：2.5 dollars per month（虽然都显示告罄，还是有5刀的可以选）</li>\n<li>可以支付宝</li>\n</ul>\n<p>缺点：</p>\n<ul>\n<li>首次必须充值最低10刀</li>\n</ul>\n<p>个人经验：</p>\n<blockquote>\n<p>不要相信别人说的亚洲节点好，其实在Vultr里亚洲节点最不稳定</p>\n<p>实际性能还是要自己测试还是需要自己测试</p>\n</blockquote>\n<ul>\n<li>尽量一个节点多测试几次，一个是看时延长短，一个是看时延波动情况</li>\n<li>Silicon Valley（硅谷）节点时延几乎最低，最稳定，稳定在170+ms</li>\n<li>新人通过老用户的链接获取的10刀必须在账户首次充值后有效，首次充值最低10刀，所以天下没有免费的午餐</li>\n</ul>\n<p><br></p>\n<ol>\n<li><a href=\"https://www.digitalocean.com\" target=\"_blank\" rel=\"noopener\">DigitalOcean</a></li>\n</ol>\n<p>优点：</p>\n<ul>\n<li>邀请码：老推新，新人享10刀</li>\n<li><a href=\"https://education.github.com/pack\" target=\"_blank\" rel=\"noopener\">GitHub学生认证大礼包</a>特惠码：50刀（<a href=\"https://github.com/ivmm/Student-resources\" target=\"_blank\" rel=\"noopener\">各种学生优惠大礼包</a>）</li>\n<li>可以支付宝</li>\n<li>首次必须充值最低5刀</li>\n</ul>\n<p>缺点：</p>\n<ul>\n<li>几乎所有节点都是延时250+ms，除了旧金山节点可以进到200ms内，但是不稳定</li>\n<li>及其不稳定，一个节点的时延波动极大，实测可能还会丢包</li>\n<li>一旦一个邀请码或特惠码使用后不能用第二个特惠码，即老用户邀请的新用户无法使用更GitHub学生大礼包的50刀</li>\n<li>VPS系统内核升级很难</li>\n</ul>\n<p><br></p>\n<p>个人经验：</p>\n<ul>\n<li>不是很推荐，除了50刀诱惑人（可以用一年）</li>\n<li>我可是连续开了三个号才弄清GitHub学生大礼包的优惠码不能喝邀请码同时使用</li>\n</ul>\n<p><br></p>\n<ol>\n<li>系统选择</li>\n</ol>\n<p>尝试了CentOS 7，“据说”比较稳定。</p>\n<p><br></p>\n<ol>\n<li>总结</li>\n</ol>\n<blockquote>\n<p> 偏向于Vultr，便宜而且部分节点很稳。DigitalOcean除了有大礼包吸引我，就没别的了🤦‍♀️</p>\n</blockquote>\n<p><strong>个人推荐1：Vultr + CentOS 7 + Silicon Valley</strong></p>\n<p><strong>个人推荐2：Vultr (CentOS 7 + Silicon Valley) + DigitalOcean (CentOS 7 + San Francisco) </strong> <em>由于可能容易被墙识别然后block，就用大礼包的免费50刀开个备用线路</em></p>\n<h2 id=\"二、CentOS-7-shadowsocks-libev\"><a href=\"#二、CentOS-7-shadowsocks-libev\" class=\"headerlink\" title=\"二、CentOS 7 + shadowsocks-libev\"></a>二、CentOS 7 + shadowsocks-libev</h2><blockquote>\n<p>集各家之精华</p>\n<p>Reference：</p>\n<p><a href=\"http://shadowsocks.org/en/download/servers.html\" target=\"_blank\" rel=\"noopener\">shadowsocks.org</a></p>\n<p><a href=\"https://github.com/shadowsocks/shadowsocks-libev#os-x\" target=\"_blank\" rel=\"noopener\">GitHub</a></p>\n<p><a href=\"https://www.racecoder.com/index.php/archives/218/\" target=\"_blank\" rel=\"noopener\">CentOS 7安装ShadowSocks（libev版本）加上KCP加速</a></p>\n<p><a href=\"https://roxhaiy.wordpress.com/2017/08/04/430/\" target=\"_blank\" rel=\"noopener\">CentOS 7 配置 shadowsocks-libev 服务器端进行科学上网</a></p>\n<p><a href=\"https://zzz.buzz/zh/gfw/2017/08/14/install-shadowsocks-server-on-centos-7/\" target=\"_blank\" rel=\"noopener\">CentOS 7 下安装 Shadowsocks 服务端</a></p>\n<p><a href=\"https://blog.ikke.moe/posts/centos-shadowsocks-libev-simple-obfs/\" target=\"_blank\" rel=\"noopener\">CentOS 搭建 Shadowsocks-libev 环境</a></p>\n</blockquote>\n<h3 id=\"1-更新基本编译依赖\"><a href=\"#1-更新基本编译依赖\" class=\"headerlink\" title=\"1. 更新基本编译依赖\"></a>1. 更新基本编译依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># yum install epel-release -y</span><br><span class=\"line\"># yum update</span><br><span class=\"line\"># yum install gcc gettext autoconf libtool automake make openssl-devel pcre-devel asciidoc xmlto zlib-devel openssl-devel libsodium-devel udns-devel libev-devel -y</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2. 安装\"></a>2. 安装</h3><p>添加单独的仓库，可能要另外安装wget<code>yum install wget</code>。</p>\n<p>完成下面命令<code>/etc/yum.repos.d/</code>目录下出现<code>librehat-shadowsocks-epel-7.repo</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># wget https://copr.fedorainfracloud.org/coprs/librehat/shadowsocks/repo/epel-7/librehat-shadowsocks-epel-7.repo</span><br><span class=\"line\"># cp librehat-shadowsocks-epel-7.repo /etc/yum.repos.d/</span><br></pre></td></tr></table></figure>\n<p>安装shadowsocks-libev</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># yum update</span><br><span class=\"line\"># yum install shadowsocks-libev</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如果出现：</p>\n<p>No package udns-devel available.<br>No package mbedtls-devel available.</p>\n<p>尝试</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; # yum -y install yum-utils</span><br><span class=\"line\">&gt; # yum-config-manager --enable epel</span><br><span class=\"line\">&gt; # yum update</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"3-编辑配置文件\"><a href=\"#3-编辑配置文件\" class=\"headerlink\" title=\"3. 编辑配置文件\"></a>3. 编辑配置文件</h3><p>编辑配置文件<code>/etc/shadowsocks-libev/config.json</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;server&quot;: &quot;34.24.24.241&quot;,</span><br><span class=\"line\">\t&quot;server_port&quot;: 43943,</span><br><span class=\"line\">\t&quot;local_address&quot;: &quot;127.0.0.1&quot;,</span><br><span class=\"line\">\t&quot;local_port&quot;: 1080,</span><br><span class=\"line\">\t&quot;password&quot;: &quot;zzz.buzz&quot;,</span><br><span class=\"line\">    &quot;method&quot;:&quot;aes-256-gcm&quot;,</span><br><span class=\"line\">    &quot;timeout&quot;: 600</span><br><span class=\"line\">\t&quot;mode&quot;: &quot;tcp_and_udp&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>加密推荐aes-256-gcm，尽量不要和网上样选aes-256-cfb</p>\n<p>端口推荐五位，不要常用端口如：8888，6666，2333</p>\n<p>上面措施都是为了防止被墙学习到，然后导致<code>Connection has been reset by perr.</code>（其实可能也没什么用。。）</p>\n<h3 id=\"4-启动服务器\"><a href=\"#4-启动服务器\" class=\"headerlink\" title=\"4. 启动服务器\"></a>4. 启动服务器</h3><p>这里用运行系统服务的方式（其实也可以直接<code>ss-server</code>启动）</p>\n<p>系统服务的方式缺点就是看不到各种进过服务器流量的日志和错误日志。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># systemctl start shadowsocks-libev</span><br><span class=\"line\"># systemctl status shadowsocks-libev -l</span><br><span class=\"line\"># systemctl stop shadowsocks-libev</span><br></pre></td></tr></table></figure>\n<p>将该服务放入系统默认启动服务</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># systemctl enable shadowsocks-libev</span><br></pre></td></tr></table></figure>\n<p>下面几句查看状态，错误时可以查看（虽然作为服务可以看到的log信息不多）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 如果遇到故障，可以查看最近一次启动后的系统日志：</span><br><span class=\"line\"># journalctl -b</span><br><span class=\"line\"></span><br><span class=\"line\"># 或者指定查看 shadowsocks 最近一次启动后的日志：</span><br><span class=\"line\"># journalctl -b -u shadowsocks</span><br><span class=\"line\"></span><br><span class=\"line\"># 或者实施跟踪最近一次启动后的实时日志：</span><br><span class=\"line\"># journalctl -f -b -u shadowsocks</span><br></pre></td></tr></table></figure>\n<p>顺便查看系统服务</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#  systemctl list-units –type=service</span><br><span class=\"line\">or</span><br><span class=\"line\"># systemctl list-unit-files | grep enabled</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-客户端安装\"><a href=\"#5-客户端安装\" class=\"headerlink\" title=\"5. 客户端安装\"></a>5. 客户端安装</h3><p>自己用的是gui客户端：<a href=\"https://github.com/shadowsocks/ShadowsocksX-NG/releases\" target=\"_blank\" rel=\"noopener\">ShadowsocksX-NG</a></p>\n<blockquote>\n<p><a href=\"http://shadowsocks.org/en/download/clients.html\" target=\"_blank\" rel=\"noopener\">其他版本</a></p>\n</blockquote>\n<p><br></p>\n<h2 id=\"三、Firewalls\"><a href=\"#三、Firewalls\" class=\"headerlink\" title=\"三、Firewalls\"></a>三、Firewalls</h2><ul>\n<li>iptables</li>\n</ul>\n<p>iptables和iptables-services不一定同时都有，iptables-services装了才能当作服务运行</p>\n<p>下面第三句保存过滤规则到系统服务中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># yum install iptables iptables-services -y</span><br><span class=\"line\"># iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport [server port] -j ACCEPT</span><br><span class=\"line\"># service iptables save</span><br></pre></td></tr></table></figure>\n<p>启动服务，注册到开机基本服务中，使得开机自启</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># systemctl start iptables.service</span><br><span class=\"line\"># systemctl enable iptables.service</span><br></pre></td></tr></table></figure>\n<p>熟悉的几句，查看状态</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># systemctl status iptables.service</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>这几句同样奏效</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; # service iptables start</span><br><span class=\"line\">&gt; # service iptables status</span><br><span class=\"line\">&gt; # service iptables stop</span><br><span class=\"line\">&gt; # service iptables restart</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<ul>\n<li>firewalld</li>\n</ul>\n<p>没用到╮(╯_╰)╭</p>\n<h2 id=\"ServerSpeeder-BBR-Kcptun-FinalSpeed\"><a href=\"#ServerSpeeder-BBR-Kcptun-FinalSpeed\" class=\"headerlink\" title=\"ServerSpeeder/ BBR/ Kcptun/ FinalSpeed\"></a>ServerSpeeder/ <del>BBR</del>/ <del>Kcptun</del>/ <del>FinalSpeed</del></h2><ul>\n<li>ServerSpeeder锐速<ul>\n<li>系统内核需要在级别<code>kernel-3.10.0-229.1.2.el7.x86_64.rpm</code></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># rpm -ivh http://soft.91yun.org/ISO/Linux/CentOS/kernel/kernel-3.10.0-229.1.2.el7.x86_64.rpm --force</span><br><span class=\"line\"># reboot</span><br></pre></td></tr></table></figure>\n<p>安装</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#wget -N --no-check-certificate https://github.com/91yun/serverspeeder/raw/master/serverspeeder.sh &amp;&amp; bash serverspeeder.sh</span><br></pre></td></tr></table></figure>\n<p>使用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># service serverSpeeder start</span><br><span class=\"line\"># service serverSpeeder status</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://github.com/iMeiji/shadowsocks_install/wiki/开启TCP-BBR拥塞控制算法\" target=\"_blank\" rel=\"noopener\">BBR</a><ul>\n<li>linux内核4.9+版本自带，有需要则可以开启</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/xtaci/kcptun\" target=\"_blank\" rel=\"noopener\">Kcptun</a><ul>\n<li>服务端配置简单一条龙服务</li>\n<li>客户端结合ss客户端使用麻烦</li>\n<li><a href=\"https://github.com/dfdragon/kcptun_gclient/releases\" target=\"_blank\" rel=\"noopener\">windows gui</a></li>\n</ul>\n</li>\n<li><a href=\"https://github.com/d1sm/finalspeed/tree/fileshare\" target=\"_blank\" rel=\"noopener\">FinalSpeed</a><ul>\n<li>没有尝试</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"SSR\"><a href=\"#SSR\" class=\"headerlink\" title=\"SSR\"></a><del>SSR</del></h2><p><del>混淆弄了很久，是在搞不动。。</del></p>\n"}